"use strict";(self.webpackChunkevent_reservation_app_docs=self.webpackChunkevent_reservation_app_docs||[]).push([[4426],{643:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"backend/security/authentication","title":"Autenticacion","description":"Archivo: authentication.md","source":"@site/docs/backend/security/authentication.md","sourceDirName":"backend/security","slug":"/backend/security/authentication","permalink":"/EventResourceReservationAppDocs/en/docs/backend/security/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/jose-angell/EventResourceReservationAppDocs/docs/backend/security/authentication.md","tags":[],"version":"current","frontMatter":{},"sidebar":"backendSidebar","previous":{"title":"Operaciones","permalink":"/EventResourceReservationAppDocs/en/docs/backend/ops/"},"next":{"title":"Autorizaci\xf3n","permalink":"/EventResourceReservationAppDocs/en/docs/backend/security/authorization"}}');var i=l(4848),t=l(8453);const d={},r="Autenticacion",c={},o=[{value:"Esquema de Autenticaci\xf3n (JWT Bearer)",id:"esquema-de-autenticaci\xf3n-jwt-bearer",level:2},{value:"Configuracion del servidor",id:"configuracion-del-servidor",level:2},{value:"Flujo de Autenticaci\xf3n Paso a Paso",id:"flujo-de-autenticaci\xf3n-paso-a-paso",level:2},{value:"Uso del Token (Acceso a Recursos)",id:"uso-del-token-acceso-a-recursos",level:2},{value:"Especificaci\xf3n de Endpoints de Autenticaci\xf3n",id:"especificaci\xf3n-de-endpoints-de-autenticaci\xf3n",level:2},{value:"Detalle del Uso y Estructura del JWT",id:"detalle-del-uso-y-estructura-del-jwt",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"autenticacion",children:"Autenticacion"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Archivo:"})," ",(0,i.jsx)(n.code,{children:"authentication.md"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"esquema-de-autenticaci\xf3n-jwt-bearer",children:"Esquema de Autenticaci\xf3n (JWT Bearer)"}),"\n",(0,i.jsxs)(n.p,{children:["El esquema de seguridad de la API se basa en la autenticaci\xf3n sin estado (",(0,i.jsx)(n.em,{children:"stateless"}),") mediante JSON Web Tokens (JWT)."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Mecanismo: La API utiliza ",(0,i.jsx)(n.strong,{children:"JSON Web Tokens (JWT)"})," para la autenticaci\xf3n sin estado (stateless)."]}),"\n",(0,i.jsxs)(n.li,{children:["Protocolo: Se implementa el esquema ",(0,i.jsx)(n.strong,{children:"Bearer"})," (portador) donde el token se env\xeda en el encabezado ",(0,i.jsx)(n.code,{children:"Authorization"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Implementaci\xf3n: Se utiliza ",(0,i.jsx)(n.strong,{children:"ASP.NET Core Identity"})," para la gesti\xf3n de usuarios y contrase\xf1as (",(0,i.jsx)(n.em,{children:"hashing"}),"), y el ",(0,i.jsx)(n.em,{children:"middleware"})," JWT Bearer para la validaci\xf3n del token."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"configuracion-del-servidor",children:"Configuracion del servidor"}),"\n",(0,i.jsxs)(n.p,{children:["Esta secci\xf3n describe los componentes clave que habilitan la seguridad en el ",(0,i.jsx)(n.em,{children:"backend"}),"."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Clases de Identity"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ApplicationUser"})," y ",(0,i.jsx)(n.code,{children:"ApplicationRole"}),": Tipos personalizados de Identity que usan una clave ",(0,i.jsx)(n.code,{children:"Guid"})," y se mapean a las tablas ",(0,i.jsx)(n.code,{children:"AspNetUsers"})," y ",(0,i.jsx)(n.code,{children:"AspNetRoles"}),".","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Herencia"}),": ",(0,i.jsx)(n.code,{children:"IdentityUser<Guid>"})," / ",(0,i.jsx)(n.code,{children:"IdentityRole<Guid>"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuracion en"})," ",(0,i.jsx)(n.code,{children:"Program.cs"})]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Servicios de Identity:"})," ",(0,i.jsx)(n.code,{children:"builder.Services.AddIdentity<ApplicationUser, ApplicationRole>"})," con la configuraci\xf3n de la complejidad de la contrase\xf1a"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Servicios JWT:"})," Configuraci\xf3n del middleware ",(0,i.jsx)(n.code,{children:"AddJwtBearer"})," y sus par\xe1metros de validaci\xf3n:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validacion Critica:"})," Se requiere que el Issuer, Audience, Lifetime y Signing Key sean validados."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Secret Key:"})," Obtenida de appsettings.json."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Servicio de Tokens"})," ",(0,i.jsx)(n.code,{children:"(TokenService)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Responsabilidad:"})," Creaci\xf3n del JWT."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Contenido del Token (Claims):"})," El token incluye la identidad necesaria para la autorizaci\xf3n:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ID de Usuario:"})," (",(0,i.jsx)(n.code,{children:"ClaimTypes.NameIdentifier"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Email:"})," (",(0,i.jsx)(n.code,{children:"ClaimTypes.Email"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Roles"})," (",(0,i.jsx)(n.code,{children:"ClaimTypes.Role"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"flujo-de-autenticaci\xf3n-paso-a-paso",children:"Flujo de Autenticaci\xf3n Paso a Paso"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Paso"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Acci\xf3n del Cliente"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Acci\xf3n del Servidor (API)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"1. Solicitud"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Env\xeda credenciales (Email/Password) al ",(0,i.jsx)(n.em,{children:"endpoint"})," ",(0,i.jsx)(n.code,{children:"POST /api/auth/login"}),"."]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["El ",(0,i.jsx)(n.code,{children:"AuthController"})," recibe el ",(0,i.jsx)(n.code,{children:"LoginRequest"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"2. Verificaci\xf3n"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"N/A"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["El ",(0,i.jsx)(n.code,{children:"UserManager"})," busca el usuario (",(0,i.jsx)(n.code,{children:"FindByEmailAsync"}),") y verifica la contrase\xf1a (",(0,i.jsx)(n.code,{children:"CheckPasswordAsync"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"3. Generaci\xf3n"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"N/A"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Si la verificaci\xf3n es exitosa, el ",(0,i.jsx)(n.code,{children:"TokenService"})," genera y firma un JWT utilizando la clave secreta del servidor."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"4. Respuesta"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Recibe la respuesta HTTP ",(0,i.jsx)(n.strong,{children:"200 OK"}),"."]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["La API devuelve el ",(0,i.jsx)(n.strong,{children:"JWT"})," (junto con el ID de usuario y roles) dentro del cuerpo del ",(0,i.jsx)(n.code,{children:"AuthResponse"}),"."]})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"uso-del-token-acceso-a-recursos",children:"Uso del Token (Acceso a Recursos)"}),"\n",(0,i.jsx)(n.p,{children:"Para acceder a m\xe9todos protegidos, el cliente debe incluir el token en cada solicitud."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Acceso a metodos protegidos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"M\xe9todo:"})," Todas las solicitudes a endpoints protegidos (",(0,i.jsx)(n.code,{children:"[Authorize]"}),") deben incluir el token."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Encabezado:"})," El cliente debe a\xf1adir el encabezado ",(0,i.jsx)(n.code,{children:"Authorization"}),' con el prefijo "Bearer" y el token:',"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-JSON",children:"Authorization: Bearer <El.Token.Completo.Aqu\xed>\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validaci\xf3n:"})," El middleware JWT Bearer intercepta el encabezado, valida la firma, verifica la expiraci\xf3n, y extrae los claims para poblar el objeto ",(0,i.jsx)(n.code,{children:"HttpContext.User"})," (el ",(0,i.jsx)(n.code,{children:"ClaimsPrincipal"}),").","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Si la validaci\xf3n falla (token expirado, firma inv\xe1lida), la respuesta es ",(0,i.jsx)(n.code,{children:"HTTP 401 Unauthorized"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"especificaci\xf3n-de-endpoints-de-autenticaci\xf3n",children:"Especificaci\xf3n de Endpoints de Autenticaci\xf3n"}),"\n",(0,i.jsx)(n.p,{children:"Detalle de los endpoints disponibles para la gesti\xf3n de acceso de usuarios."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Registro ",(0,i.jsx)(n.code,{children:"(POST /api/auth/register)"})]})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Par\xe1metro"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Tipo"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Requerido"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Correo electr\xf3nico \xfanico del usuario."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"password"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Contrase\xf1a del usuario (sujeta a las pol\xedticas de complejidad)."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"firstName"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Primer nombre del usuario."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"lastName"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Apellido paterno."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"secondLastName"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Apellido materno (opcional en algunos sistemas)."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuestas"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"C\xf3digo"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Cuerpo de Respuesta (Body)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"200 OK"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Registro exitoso. Devuelve el token JWT para iniciar la sesi\xf3n inmediatamente."}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"AuthResponse"})," (incluye ",(0,i.jsx)(n.code,{children:"Token"}),", ",(0,i.jsx)(n.code,{children:"UserId"}),", ",(0,i.jsx)(n.code,{children:"Roles"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"400 Bad Request"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Datos inv\xe1lidos o usuario ya existe."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Lista de errores de validaci\xf3n de Identity (e.g., contrase\xf1a d\xe9bil, email ya registrado)."})]})]})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Login ",(0,i.jsx)(n.code,{children:"(POST /api/auth/login)"})]})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Permite el inicio de sesi\xf3n con credenciales v\xe1lidas."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Par\xe1metro"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Tipo"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Requerido"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Correo electr\xf3nico del usuario."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"password"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Contrase\xf1a del usuario."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"S\xed"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Respuestas"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"C\xf3digo"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Cuerpo de Respuesta (Body)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"200 OK"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Inicio de sesi\xf3n exitoso."}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"AuthResponse"})," (incluye ",(0,i.jsx)(n.code,{children:"JWT"}),", ",(0,i.jsx)(n.code,{children:"UserId"}),", ",(0,i.jsx)(n.code,{children:"Roles"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"401 Unauthorized"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Credenciales inv\xe1lidas (email o contrase\xf1a incorrectos)."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:'{ "message": "Credenciales inv\xe1lidas." }'})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"detalle-del-uso-y-estructura-del-jwt",children:"Detalle del Uso y Estructura del JWT"}),"\n",(0,i.jsx)(n.p,{children:"Esta secci\xf3n ampl\xeda c\xf3mo se usa el token en el cliente y sus propiedades internas."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Estructura del Token (Claims Clave)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"El JWT generado es una cadena codificada que contiene la siguiente informaci\xf3n de identidad:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Claim"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Mapeo C#"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"sub"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ClaimTypes.NameIdentifier"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["El ID \xfanico del usuario (tipo ",(0,i.jsx)(n.code,{children:"Guid"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ClaimTypes.Email"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"El correo electr\xf3nico del usuario."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"role"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ClaimTypes.Role "})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Uno o varios roles asignados al usuario (e.g., Client, Admin)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"exp"})})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"N/A"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Timestamp de expiraci\xf3n del token."})]})]})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Inclusi\xf3n en Peticiones Protegidas"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"M\xe9todo:"})," Todas las solicitudes a endpoints protegidos (",(0,i.jsx)(n.code,{children:"[Authorize]"}),") deben incluir el token."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Encabezado:"})," Se debe a\xf1adir el encabezado ",(0,i.jsx)(n.code,{children:"Authorization"})," con el prefijo ",(0,i.jsx)(n.code,{children:"Bearer"})," y el token:"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-JSON",children:"Authorization: Bearer <El.Token.Completo.Aqu\xed>\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Pol\xedtica de Expiraci\xf3n"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vigencia:"})," La validez del token se define en la configuraci\xf3n del servidor, bajo la clave ",(0,i.jsx)(n.code,{children:"JwtSettings:TokenExpirationInMinutes"})," en ",(0,i.jsx)(n.code,{children:"appsettings.json"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manejo:"})," Una vez expirado, el token resultar\xe1 en una respuesta ",(0,i.jsx)(n.strong,{children:"HTTP 401 Unauthorized"})," y el usuario deber\xe1 volver a iniciar sesi\xf3n para obtener un nuevo token."]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>d,x:()=>r});var s=l(6540);const i={},t=s.createContext(i);function d(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);