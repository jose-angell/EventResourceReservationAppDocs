"use strict";(self.webpackChunkevent_reservation_app_docs=self.webpackChunkevent_reservation_app_docs||[]).push([[9145],{3333:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>x,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"backend/Features/feature-Review/tests","title":"05-tests","description":"Archivo: 05-tests.md","source":"@site/docs/backend/Features/04-feature-Review/05-tests.md","sourceDirName":"backend/Features/04-feature-Review","slug":"/backend/Features/feature-Review/tests","permalink":"/EventResourceReservationAppDocs/en/docs/backend/Features/feature-Review/tests","draft":false,"unlisted":false,"editUrl":"https://github.com/jose-angell/EventResourceReservationAppDocs/docs/backend/Features/04-feature-Review/05-tests.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"05-tests"},"sidebar":"backendSidebar","previous":{"title":"04-security","permalink":"/EventResourceReservationAppDocs/en/docs/backend/Features/feature-Review/security"},"next":{"title":"Operaciones","permalink":"/EventResourceReservationAppDocs/en/docs/category/operaciones-1"}}');var i=t(4848),l=t(8453);const a={sidebar_position:4,title:"05-tests"},r="\ud83e\uddea Pruebas",d={},c=[{value:"1. Pruebas Unitarias (Unit Tests)",id:"1-pruebas-unitarias-unit-tests",level:2},{value:"2. Pruebas de Integraci\xf3n (Integration Tests)",id:"2-pruebas-de-integraci\xf3n-integration-tests",level:2},{value:"3. Cobertura de C\xf3digo",id:"3-cobertura-de-c\xf3digo",level:2}];function o(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"-pruebas",children:"\ud83e\uddea Pruebas"})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Archivo: ",(0,i.jsx)(s.code,{children:"05-tests.md"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Este documento detalla la ",(0,i.jsx)(s.strong,{children:"estrategia de pruebas"})," implementada para la feature ",(0,i.jsx)(s.code,{children:"Review Management"}),". Se especifica la cobertura de pruebas unitarias y de integraci\xf3n, as\xed como los escenarios clave probados para asegurar la funcionalidad, fiabilidad y calidad del c\xf3digo."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"1-pruebas-unitarias-unit-tests",children:"1. Pruebas Unitarias (Unit Tests)"}),"\n",(0,i.jsxs)(s.p,{children:["Las pruebas unitarias se enfocan en verificar la ",(0,i.jsx)(s.strong,{children:"l\xf3gica de negocio individual y aislada"})," de cada componente (clases, m\xe9todos), utilizando mocks para sus dependencias externas."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{style:{textAlign:"left"},children:"Clase de Test"}),(0,i.jsx)(s.th,{style:{textAlign:"left"},children:"Componente o L\xf3gica Probada"}),(0,i.jsx)(s.th,{style:{textAlign:"left"},children:"Escenarios Clave / Casos de Prueba"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"},children:(0,i.jsx)(s.code,{children:"CreateReviewUseCaseTests"})}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"L\xf3gica de creaci\xf3n de Rese\xf1a \xa0"}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Creaci\xf3n exitosa de una nueva rese\xf1a con datos v\xe1lidos."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Fallo por validaci\xf3n de datos de entrada inv\xe1lidos (",(0,i.jsx)(s.code,{children:"InvalidInput"}),"). \xa0"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,i.jsx)(s.code,{children:"PersistenceException"}),"). \xa0"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"},children:(0,i.jsx)(s.code,{children:"UpdateReviewUseCaseTests"})}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"L\xf3gica de actualizaci\xf3n de Rese\xf1a"}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Actualizaci\xf3n exitosa de la cantidad."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Fallo si la rese\xf1a no existe (",(0,i.jsx)(s.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Fallo por datos inv\xe1lidos de la entidad de dominio (",(0,i.jsx)(s.code,{children:"InvalidInput"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"},children:(0,i.jsx)(s.code,{children:"DeleteReviewUseCaseTests"})}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"L\xf3gica de eliminaci\xf3n de Rese\xf1a"}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Eliminaci\xf3n exitosa de una rese\xf1a existente."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Fallo si la rese\xf1a no existe (",(0,i.jsx)(s.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,i.jsx)(s.code,{children:"PersistenceException"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"},children:(0,i.jsx)(s.code,{children:"ReadAllReviewUseCaseTests"})}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de todas las Rese\xf1a"}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de todas las rese\xf1as si filtro"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Filtrado de rese\xf1as por recurso  (ResourceId)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- ordenamiento de rese\xf1as por el puntuacion o fecha creacion (OrderBy)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["Manejo de excepciones de persistencia (",(0,i.jsx)(s.code,{children:"PersistenceException"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"},children:(0,i.jsx)(s.code,{children:"ReadByIdReviewUseCaseTests"})}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de Rese\xf1a por Id"}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de la rese\xf1as por Id"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"},children:"- Filtrado de rese\xf1as por Id."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["Fallo si la rese\xf1as no existe (",(0,i.jsx)(s.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsx)(s.td,{style:{textAlign:"left"}}),(0,i.jsxs)(s.td,{style:{textAlign:"left"},children:["Manejo de excepciones de persistencia (",(0,i.jsx)(s.code,{children:"PersistenceException"}),")."]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Consideraciones Clave:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Se utilizan mocks (con Moq) para aislar las unidades de c\xf3digo y probar su l\xf3gica sin dependencias reales de base de datos o servicios externos."}),"\n",(0,i.jsx)(s.li,{children:"Las pruebas siguen el patr\xf3n Arrange-Act-Assert para una estructura clara y legible."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"2-pruebas-de-integraci\xf3n-integration-tests",children:"2. Pruebas de Integraci\xf3n (Integration Tests)"}),"\n",(0,i.jsx)(s.p,{children:"Las pruebas de integraci\xf3n validan la interacci\xf3n entre m\xfaltiples componentes del sistema, incluyendo la API, la l\xf3gica de negocio y la persistencia de datos real (o simulada con bases de datos en memoria/contenedores)."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Verificaci\xf3n de Endpoints y Flujos Completos:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /api/Reviews"})," con payload v\xe1lido: Verifica la creaci\xf3n de una nueva rese\xf1a de principio a fin, incluyendo la persistencia en la base de datos y la respuesta HTTP ",(0,i.jsx)(s.code,{children:"201 Created"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"PUT /api/Reviews/{id}"})," con payload v\xe1lido: Confirma la actualizaci\xf3n de una rese\xf1a, la persistencia en la base de datos y la respuesta HTTP 200 OK."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/Reviews?clientId=..."}),": Confirma que la API devuelve los resultados correctos seg\xfan los filtros, interactuando con la capa de datos."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"DELETE /api/Reviews/{id}"}),": Valida la eliminaci\xf3n de una rese\xf1a y su correcta reflejo en la base de datos."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Pruebas de Seguridad y Autorizaci\xf3n:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"POST /api/Reviews sin token de autenticaci\xf3n: Espera HTTP 401 Unauthorized."}),"\n",(0,i.jsx)(s.li,{children:"DELETE /api/Reviews sin permisos insuficientes: Espera HTTP 403 Forbidden."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Manejo de Errores y Casos de Borde:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Intentar actualizar una rese\xf1a que no existe (HTTP 404 Not Found)."}),"\n",(0,i.jsx)(s.li,{children:"Escenarios de validaci\xf3n (HTTP 400 Bad Request) con payloads inv\xe1lidos."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsxs)(s.strong,{children:["Uso de ",(0,i.jsx)(s.code,{children:"WebApplicationFactory<T>"})]}),": Se utiliza ",(0,i.jsx)(s.code,{children:"WebApplicationFactory<Program>"})," para hospedar la aplicaci\xf3n de backend en memoria, permitiendo realizar llamadas HTTP reales a los controladores."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Base de Datos para Pruebas"}),": Se configura una base de datos ",(0,i.jsx)(s.code,{children:"InMemory"})," (o se sugiere el uso de Testcontainers para escenarios m\xe1s complejos) para asegurar la independencia de cada suite de pruebas y una ejecuci\xf3n r\xe1pida."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"3-cobertura-de-c\xf3digo",children:"3. Cobertura de C\xf3digo"}),"\n",(0,i.jsx)(s.p,{children:"La cobertura de c\xf3digo es una m\xe9trica clave para evaluar la calidad de las pruebas."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Objetivo M\xednimo"}),": Se aspira a una cobertura de pruebas de al menos ",(0,i.jsx)(s.strong,{children:"80%"})," para la l\xf3gica de los ",(0,i.jsx)(s.strong,{children:"Casos de Uso (Application Layer)"})," y los ",(0,i.jsx)(s.strong,{children:"Controladores (API Layer)"})," de esta feature."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Herramientas de Medici\xf3n"}),": Se recomienda el uso de herramientas como Coverlet (integrado con .NET SDK) para generar reportes de cobertura."]}),"\n"]})]})}function x(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>r});var n=t(6540);const i={},l=n.createContext(i);function a(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);