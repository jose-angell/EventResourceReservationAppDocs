"use strict";(self.webpackChunkevent_reservation_app_docs=self.webpackChunkevent_reservation_app_docs||[]).push([[6684],{1427:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"backend/Features/feature-Location/security","title":"04-security","description":"Archivo: 04-security.md","source":"@site/docs/backend/Features/01-feature-Location/04-security.md","sourceDirName":"backend/Features/01-feature-Location","slug":"/backend/Features/feature-Location/security","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Location/security","draft":false,"unlisted":false,"editUrl":"https://github.com/jose-angell/EventResourceReservationAppDocs/docs/backend/Features/01-feature-Location/04-security.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"04-security"},"sidebar":"backendSidebar","previous":{"title":"03-endpoints","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Location/endpoints"},"next":{"title":"05-tests","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Location/tests"}}');var n=r(4848),o=r(8453);const a={sidebar_position:4,title:"04-security"},c="\ud83d\udd12 Seguridad y validaciones",d={},l=[{value:"1. Roles y Permisos Requeridos",id:"1-roles-y-permisos-requeridos",level:2},{value:"2.  Claims o Scopes JWT Requeridos",id:"2--claims-o-scopes-jwt-requeridos",level:2},{value:"3. Validaciones de Entrada (Input Validations)",id:"3-validaciones-de-entrada-input-validations",level:2},{value:"4. Reglas de Autorizaci\xf3n Espec\xedficas",id:"4-reglas-de-autorizaci\xf3n-espec\xedficas",level:2}];function t(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"-seguridad-y-validaciones",children:"\ud83d\udd12 Seguridad y validaciones"})}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["Archivo: ",(0,n.jsx)(s.code,{children:"04-security.md"})]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"1-roles-y-permisos-requeridos",children:"1. Roles y Permisos Requeridos"}),"\n",(0,n.jsx)(s.p,{children:"Aqu\xed se especifican los roles de usuario que est\xe1n autorizados para interactuar con esta feature y los permisos espec\xedficos asociados a cada operaci\xf3n."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"AdminPrincipal"}),": Permite la gesti\xf3n completa de recursos y reservas (CRUD total)."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Organizer"}),": Permite crear, leer y actualizar sus propias reservas, y consultar todos los recursos disponibles."]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"2--claims-o-scopes-jwt-requeridos",children:"2.  Claims o Scopes JWT Requeridos"}),"\n",(0,n.jsx)(s.p,{children:"Se listan los claims (afirmaciones sobre la identidad del usuario) o scopes JWT (\xe1mbitos de acceso) que el token de autenticaci\xf3n debe contener para permitir el acceso a las operaciones de esta feature. Estos definen granularmente lo que un usuario puede hacer."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"scope:<feature>.<acci\xf3n>"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"scope:reservations.create"}),": Requerido para crear nuevas reservas."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"scope:reservations.read"}),": Requerido para consultar detalles de reservas (propias o generales, seg\xfan el rol)."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"scope:resources.read"}),": Requerido para consultar la lista de recursos disponibles."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"userId: <UUID del usuario>"}),': Claim para identificar al usuario que realiza la solicitud, usado en reglas de autorizaci\xf3n por "ownership".']}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"3-validaciones-de-entrada-input-validations",children:"3. Validaciones de Entrada (Input Validations)"}),"\n",(0,n.jsxs)(s.p,{children:["Esta secci\xf3n describe las reglas de negocio y formato de datos que deben cumplirse para que una solicitud sea v\xe1lida. Cualquier solicitud que no cumpla estas validaciones debe ser rechazada con un ",(0,n.jsx)(s.code,{children:"HTTP 400 Bad Request"}),"."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Campos Obligatorios:"})," El campo ",(0,n.jsx)(s.code,{children:"<NombreCampo>"})," es obligatorio y no puede ser nulo o vac\xedo."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Formato de Fechas/Horas:"})," Las fechas y horas (",(0,n.jsx)(s.code,{children:"StartTime"}),", ",(0,n.jsx)(s.code,{children:"EndTime"}),") deben seguir el formato ISO 8601 (ej. ",(0,n.jsx)(s.code,{children:"2025-07-15T10:00:00Z"}),") y representar un rango v\xe1lido (EndTime > StartTime)."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Longitud de Cadenas:"})," El campo ",(0,n.jsx)(s.code,{children:"<NombreCampo>"})," no debe exceder los 100 caracteres."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Rangos Num\xe9ricos:"})," Los campos num\xe9ricos (",(0,n.jsx)(s.code,{children:"Capacity"}),", ",(0,n.jsx)(s.code,{children:"Quantity"}),") deben estar dentro de un rango permitido (ej. ",(0,n.jsx)(s.code,{children:"> 0"})," y ",(0,n.jsx)(s.code,{children:"< 1000"}),")."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"UUIDs V\xe1lidos:"})," Los campos ",(0,n.jsx)(s.code,{children:"ResourceId"})," y ",(0,n.jsx)(s.code,{children:"UserId"})," deben ser UUIDs v\xe1lidos."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Estado de Reserva:"})," El campo ",(0,n.jsx)(s.code,{children:"Status"})," debe ser uno de los valores predefinidos (",(0,n.jsx)(s.code,{children:"Pending"}),", ",(0,n.jsx)(s.code,{children:"Confirmed"}),", ",(0,n.jsx)(s.code,{children:"Cancelled"}),")."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"4-reglas-de-autorizaci\xf3n-espec\xedficas",children:"4. Reglas de Autorizaci\xf3n Espec\xedficas"}),"\n",(0,n.jsxs)(s.p,{children:["Aqu\xed se detallan las ",(0,n.jsx)(s.strong,{children:"reglas de negocio espec\xedficas"})," que determinan qui\xe9n puede realizar qu\xe9 acci\xf3n sobre los datos, m\xe1s all\xe1 de los permisos b\xe1sicos del claim. Esto a menudo implica verificar la relaci\xf3n del usuario con el recurso (",(0,n.jsx)(s.code,{children:"ownership"}),")."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"SCreaci\xf3n de Reservas:"})," Cualquier usuario con el permiso reservations.create puede crear una reserva."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Lectura de Reservas:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Un ",(0,n.jsx)(s.code,{children:"Organizer"})," o ",(0,n.jsx)(s.code,{children:"User"})," solo puede leer sus propias reservas."]}),"\n",(0,n.jsxs)(s.li,{children:["Un ",(0,n.jsx)(s.code,{children:"AdminPrincipal"})," puede leer todas las reservas en el sistema."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Modificaci\xf3n/Eliminaci\xf3n de Reservas:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Solo el ",(0,n.jsx)(s.strong,{children:"propietario"})," de la reserva (el ",(0,n.jsx)(s.code,{children:"UserId"})," de la reserva coincide con el ",(0,n.jsx)(s.code,{children:"userId"})," del token) puede modificarla o eliminarla."]}),"\n",(0,n.jsxs)(s.li,{children:["Un ",(0,n.jsx)(s.code,{children:"AdminPrincipal"})," tambi\xe9n puede modificar o eliminar cualquier reserva."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Consistencia de Datos:"})," No se puede reservar un recurso si ya est\xe1 ocupado en el mismo rango de tiempo."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>c});var i=r(6540);const n={},o=i.createContext(n);function a(e){const s=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);