"use strict";(self.webpackChunkevent_reservation_app_docs=self.webpackChunkevent_reservation_app_docs||[]).push([[576],{3657:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>d,default:()=>x,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"backend/Features/feature-Location/tests","title":"05-tests","description":"Archivo: 05-tests.md","source":"@site/docs/backend/Features/02-feature-Location/05-tests.md","sourceDirName":"backend/Features/02-feature-Location","slug":"/backend/Features/feature-Location/tests","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Location/tests","draft":false,"unlisted":false,"editUrl":"https://github.com/jose-angell/EventResourceReservationAppDocs/docs/backend/Features/02-feature-Location/05-tests.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"05-tests"},"sidebar":"backendSidebar","previous":{"title":"04-security","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Location/security"},"next":{"title":"01-feature-Carrito-de-Reservas","permalink":"/EventResourceReservationAppDocs/docs/category/01-feature-carrito-de-reservas-1"}}');var i=s(4848),l=s(8453);const a={sidebar_position:4,title:"05-tests"},d="\ud83e\uddea Pruebas",r={},c=[{value:"1. Pruebas Unitarias (Unit Tests)",id:"1-pruebas-unitarias-unit-tests",level:2},{value:"2. Pruebas de Integraci\xf3n (Integration Tests)",id:"2-pruebas-de-integraci\xf3n-integration-tests",level:2},{value:"3. Cobertura de C\xf3digo",id:"3-cobertura-de-c\xf3digo",level:2}];function o(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"-pruebas",children:"\ud83e\uddea Pruebas"})}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["Archivo: ",(0,i.jsx)(t.code,{children:"05-tests.md"})]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Este documento detalla la ",(0,i.jsx)(t.strong,{children:"estrategia de pruebas"})," implementada para la feature ",(0,i.jsx)(t.code,{children:"Location Management"}),". Se especifica la cobertura de pruebas unitarias y de integraci\xf3n, as\xed como los escenarios clave probados para asegurar la funcionalidad, fiabilidad y calidad del c\xf3digo."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"1-pruebas-unitarias-unit-tests",children:"1. Pruebas Unitarias (Unit Tests)"}),"\n",(0,i.jsxs)(t.p,{children:["Las pruebas unitarias se enfocan en verificar la ",(0,i.jsx)(t.strong,{children:"l\xf3gica de negocio individual y aislada"})," de cada componente (clases, m\xe9todos), utilizando mocks para sus dependencias externas."]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Clase de Test"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Componente o L\xf3gica Probada"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Escenarios Clave / Casos de Prueba"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"CreateLocationUseCaseTests"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de creaci\xf3n de ubicaiones \xa0"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Creaci\xf3n exitosa de una ubicai\xf3n con datos v\xe1lidos."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo por validaci\xf3n de datos de entrada inv\xe1lidos (",(0,i.jsx)(t.code,{children:"InvalidInput"}),"). \xa0"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,i.jsx)(t.code,{children:"PersistenceException"}),"). \xa0"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"UpdateLocationUseCaseTests"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de actualizaci\xf3n de ubicaiones"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Actualizaci\xf3n exitosa de una ubicai\xf3n."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo si la ubicai\xf3n no existe (",(0,i.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo por datos inv\xe1lidos de la entidad de dominio (",(0,i.jsx)(t.code,{children:"InvalidInput"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"DeleteLocationUseCaseTests"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de eliminaci\xf3n de ubicaiones"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Eliminaci\xf3n exitosa de una ubicai\xf3n existente."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo si la ubicai\xf3n no existe (",(0,i.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,i.jsx)(t.code,{children:"PersistenceException"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"ReadAllLocaitonUseCaseTests"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de ubicaiones"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de todas las ubicaiones sin filtros"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de ubicaiones por nombre de la ciudad (City)."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de ubicaiones por el codigo postal (ZipCode)."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de ubicaiones por ID de usuario (CreatedByUserIdFilter)."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Ordenaci\xf3n de ubicaiones por ciudad y fecha de creaci\xf3n."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"ReadByIdLocationUseCaseTests"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de ubicaiones por Id"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de la ubicai\xf3n por Id"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de ubicaiones por Id."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Fallo si la ubicai\xf3n no existe (",(0,i.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Manejo de excepciones de persistencia (",(0,i.jsx)(t.code,{children:"PersistenceException"}),")."]})]})]})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Consideraciones Clave:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Se utilizan mocks (con Moq) para aislar las unidades de c\xf3digo y probar su l\xf3gica sin dependencias reales de base de datos o servicios externos."}),"\n",(0,i.jsx)(t.li,{children:"Las pruebas siguen el patr\xf3n Arrange-Act-Assert para una estructura clara y legible."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"2-pruebas-de-integraci\xf3n-integration-tests",children:"2. Pruebas de Integraci\xf3n (Integration Tests)"}),"\n",(0,i.jsx)(t.p,{children:"Las pruebas de integraci\xf3n validan la interacci\xf3n entre m\xfaltiples componentes del sistema, incluyendo la API, la l\xf3gica de negocio y la persistencia de datos real (o simulada con bases de datos en memoria/contenedores)."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Verificaci\xf3n de Endpoints y Flujos Completos:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"POST /api/locaitons"})," con payload v\xe1lido: Verifica la creaci\xf3n de una ubicai\xf3n de principio a fin, incluyendo la persistencia en la base de datos y la respuesta HTTP ",(0,i.jsx)(t.code,{children:"201 Created"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"PUT /api/locations/{id}"})," con payload v\xe1lido: Confirma la actualizaci\xf3n de una ubicai\xf3n, la persistencia en la base de datos y la respuesta HTTP 200 OK."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"GET /api/locations?nameFilter=..."}),": Confirma que la API devuelve los resultados correctos seg\xfan los filtros, interactuando con la capa de datos."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"GET /api/locations/{id}"}),": Confirma que la API devuelve los resultados correctos seg\xfan el id,, interactuando con la capa de datos."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"GET /api/locations/list"}),": Confirma que la API devuelve los resultados correctos, interactuando con la capa de datos."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"DELETE /api/locations/{id}"}),": Valida la eliminaci\xf3n de una ubicai\xf3n y su correcta reflejo en la base de datos."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Pruebas de Seguridad y Autorizaci\xf3n:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"POST /api/locations sin token de autenticaci\xf3n: Espera HTTP 401 Unauthorized."}),"\n",(0,i.jsx)(t.li,{children:"DELETE /api/locations sin permisos insuficientes: Espera HTTP 403 Forbidden."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Manejo de Errores y Casos de Borde:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Intentar actualizar una ubicai\xf3n que no existe (HTTP 404 Not Found)."}),"\n",(0,i.jsx)(t.li,{children:"Escenarios de validaci\xf3n (HTTP 400 Bad Request) con payloads inv\xe1lidos."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.strong,{children:["Uso de ",(0,i.jsx)(t.code,{children:"WebApplicationFactory<T>"})]}),": Se utiliza ",(0,i.jsx)(t.code,{children:"WebApplicationFactory<Program>"})," para hospedar la aplicaci\xf3n de backend en memoria, permitiendo realizar llamadas HTTP reales a los controladores."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Base de Datos para Pruebas"}),": Se configura una base de datos ",(0,i.jsx)(t.code,{children:"InMemory"})," (o se sugiere el uso de Testcontainers para escenarios m\xe1s complejos) para asegurar la independencia de cada suite de pruebas y una ejecuci\xf3n r\xe1pida."]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"3-cobertura-de-c\xf3digo",children:"3. Cobertura de C\xf3digo"}),"\n",(0,i.jsx)(t.p,{children:"La cobertura de c\xf3digo es una m\xe9trica clave para evaluar la calidad de las pruebas."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Objetivo M\xednimo"}),": Se aspira a una cobertura de pruebas de al menos ",(0,i.jsx)(t.strong,{children:"80%"})," para la l\xf3gica de los ",(0,i.jsx)(t.strong,{children:"Casos de Uso (Application Layer)"})," y los ",(0,i.jsx)(t.strong,{children:"Controladores (API Layer"})," de esta feature."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Herramientas de Medici\xf3n"}),": Se recomienda el uso de herramientas como Coverlet (integrado con .NET SDK) para generar reportes de cobertura."]}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>d});var n=s(6540);const i={},l=n.createContext(i);function a(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);