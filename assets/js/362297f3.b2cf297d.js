"use strict";(self.webpackChunkevent_reservation_app_docs=self.webpackChunkevent_reservation_app_docs||[]).push([[4005],{1629:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>x,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"backend/Features/feature-Category/tests","title":"05-tests","description":"Archivo: 05-tests.md","source":"@site/docs/backend/Features/01-feature-Category/05-tests.md","sourceDirName":"backend/Features/01-feature-Category","slug":"/backend/Features/feature-Category/tests","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Category/tests","draft":false,"unlisted":false,"editUrl":"https://github.com/jose-angell/EventResourceReservationAppDocs/docs/backend/Features/01-feature-Category/05-tests.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"05-tests"},"sidebar":"backendSidebar","previous":{"title":"04-security","permalink":"/EventResourceReservationAppDocs/docs/backend/Features/feature-Category/security"},"next":{"title":"02-feature-Ubicaci\xf3n","permalink":"/EventResourceReservationAppDocs/docs/category/02-feature-ubicaci\xf3n-1"}}');var l=s(4848),i=s(8453);const a={sidebar_position:4,title:"05-tests"},r="\ud83e\uddea Pruebas",d={},c=[{value:"1. Pruebas Unitarias (Unit Tests)",id:"1-pruebas-unitarias-unit-tests",level:2},{value:"2. Pruebas de Integraci\xf3n (Integration Tests)",id:"2-pruebas-de-integraci\xf3n-integration-tests",level:2},{value:"3. Cobertura de C\xf3digo",id:"3-cobertura-de-c\xf3digo",level:2}];function o(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"-pruebas",children:"\ud83e\uddea Pruebas"})}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:["Archivo: ",(0,l.jsx)(t.code,{children:"05-tests.md"})]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:["Este documento detalla la ",(0,l.jsx)(t.strong,{children:"estrategia de pruebas"})," implementada para la feature ",(0,l.jsx)(t.code,{children:"Category Management"}),". Se especifica la cobertura de pruebas unitarias y de integraci\xf3n, as\xed como los escenarios clave probados para asegurar la funcionalidad, fiabilidad y calidad del c\xf3digo."]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"1-pruebas-unitarias-unit-tests",children:"1. Pruebas Unitarias (Unit Tests)"}),"\n",(0,l.jsxs)(t.p,{children:["Las pruebas unitarias se enfocan en verificar la ",(0,l.jsx)(t.strong,{children:"l\xf3gica de negocio individual y aislada"})," de cada componente (clases, m\xe9todos), utilizando mocks para sus dependencias externas."]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Clase de Test"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Componente o L\xf3gica Probada"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Escenarios Clave / Casos de Prueba"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"CreateCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de creaci\xf3n de categor\xedas \xa0"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Creaci\xf3n exitosa de una categor\xeda con datos v\xe1lidos."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo al intentar crear una categor\xeda con un nombre ya existente (",(0,l.jsx)(t.code,{children:"Conflict"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo por validaci\xf3n de datos de entrada inv\xe1lidos (",(0,l.jsx)(t.code,{children:"InvalidInput"}),"). \xa0"]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,l.jsx)(t.code,{children:"PersistenceException"}),"). \xa0"]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"UpdateCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de actualizaci\xf3n de categor\xedas"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Actualizaci\xf3n exitosa de una categor\xeda."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo si la categor\xeda no existe (",(0,l.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo por duplicaci\xf3n de nombre (",(0,l.jsx)(t.code,{children:"Conflict"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo por datos inv\xe1lidos de la entidad de dominio (",(0,l.jsx)(t.code,{children:"InvalidInput"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"DeleteCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de eliminaci\xf3n de categor\xedas"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Eliminaci\xf3n exitosa de una categor\xeda existente."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Fallo si la categor\xeda no existe (",(0,l.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,l.jsx)(t.code,{children:"PersistenceException"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ReadAllCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de categor\xedas"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de todas las categor\xedas sin filtros"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de categor\xedas por nombre (NameFilter)."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de categor\xedas por ID de usuario (CreatedByUserIdFilter)."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Ordenaci\xf3n de categor\xedas por nombre y fecha de creaci\xf3n."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ListAllCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de categor\xedas"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de todas las categor\xedas sin filtros"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Manejo de la consulta sin la existencia de categorias."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["- Manejo de excepciones de persistencia (",(0,l.jsx)(t.code,{children:"PersistenceException"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ReadByIdCategoryUseCaseTests"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"L\xf3gica de consulta de categor\xedas por Id"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Obtenci\xf3n de la categor\xeda por Id"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"- Filtrado de categor\xedas por Id."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Fallo si la categor\xeda no existe (",(0,l.jsx)(t.code,{children:"NotFound"}),")."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsx)(t.td,{style:{textAlign:"left"}}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Manejo de excepciones de persistencia (",(0,l.jsx)(t.code,{children:"PersistenceException"}),")."]})]})]})]}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Consideraciones Clave:"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Se utilizan mocks (con Moq) para aislar las unidades de c\xf3digo y probar su l\xf3gica sin dependencias reales de base de datos o servicios externos."}),"\n",(0,l.jsx)(t.li,{children:"Las pruebas siguen el patr\xf3n Arrange-Act-Assert para una estructura clara y legible."}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"2-pruebas-de-integraci\xf3n-integration-tests",children:"2. Pruebas de Integraci\xf3n (Integration Tests)"}),"\n",(0,l.jsx)(t.p,{children:"Las pruebas de integraci\xf3n validan la interacci\xf3n entre m\xfaltiples componentes del sistema, incluyendo la API, la l\xf3gica de negocio y la persistencia de datos real (o simulada con bases de datos en memoria/contenedores)."}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Verificaci\xf3n de Endpoints y Flujos Completos:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"POST /api/categories"})," con payload v\xe1lido: Verifica la creaci\xf3n de una categor\xeda de principio a fin, incluyendo la persistencia en la base de datos y la respuesta HTTP ",(0,l.jsx)(t.code,{children:"201 Created"}),"."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"PUT /api/categories/{id}"})," con payload v\xe1lido: Confirma la actualizaci\xf3n de una categor\xeda, la persistencia en la base de datos y la respuesta HTTP 200 OK."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"GET /api/categories?nameFilter=..."}),": Confirma que la API devuelve los resultados correctos seg\xfan los filtros, interactuando con la capa de datos."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"GET /api/categories/{id}"}),": Confirma que la API devuelve los resultados correctos seg\xfan el id,, interactuando con la capa de datos."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"GET /api/categories/list"}),": Confirma que la API devuelve los resultados correctos, interactuando con la capa de datos."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"DELETE /api/categories/{id}"}),": Valida la eliminaci\xf3n de una categor\xeda y su correcta reflejo en la base de datos."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Pruebas de Seguridad y Autorizaci\xf3n:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"POST /api/categories sin token de autenticaci\xf3n: Espera HTTP 401 Unauthorized."}),"\n",(0,l.jsx)(t.li,{children:"DELETE /api/categories sin permisos insuficientes: Espera HTTP 403 Forbidden."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Manejo de Errores y Casos de Borde:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Creaci\xf3n de categor\xeda con nombre duplicado (HTTP 409 Conflict)."}),"\n",(0,l.jsx)(t.li,{children:"Intentar actualizar una categor\xeda que no existe (HTTP 404 Not Found)."}),"\n",(0,l.jsx)(t.li,{children:"Escenarios de validaci\xf3n (HTTP 400 Bad Request) con payloads inv\xe1lidos."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsxs)(t.strong,{children:["Uso de ",(0,l.jsx)(t.code,{children:"WebApplicationFactory<T>"})]}),": Se utiliza ",(0,l.jsx)(t.code,{children:"WebApplicationFactory<Program>"})," para hospedar la aplicaci\xf3n de backend en memoria, permitiendo realizar llamadas HTTP reales a los controladores."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Base de Datos para Pruebas"}),": Se configura una base de datos ",(0,l.jsx)(t.code,{children:"InMemory"})," (o se sugiere el uso de Testcontainers para escenarios m\xe1s complejos) para asegurar la independencia de cada suite de pruebas y una ejecuci\xf3n r\xe1pida."]}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"3-cobertura-de-c\xf3digo",children:"3. Cobertura de C\xf3digo"}),"\n",(0,l.jsx)(t.p,{children:"La cobertura de c\xf3digo es una m\xe9trica clave para evaluar la calidad de las pruebas."}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Objetivo M\xednimo"}),": Se aspira a una cobertura de pruebas de al menos ",(0,l.jsx)(t.strong,{children:"80%"})," para la l\xf3gica de los ",(0,l.jsx)(t.strong,{children:"Casos de Uso (Application Layer)"})," y los ",(0,l.jsx)(t.strong,{children:"Controladores (API Layer"})," de esta feature."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Herramientas de Medici\xf3n"}),": Se recomienda el uso de herramientas como Coverlet (integrado con .NET SDK) para generar reportes de cobertura."]}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>r});var n=s(6540);const l={},i=n.createContext(l);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);